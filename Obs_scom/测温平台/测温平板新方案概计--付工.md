
## 背景

当前公司供货用平板为安卓系统，不满足电力要求，需要Linux系统平板供货。同时，因公司目前没有专业安卓开发人员。早期平板功能编写太占用系统资源，平板使用效果体验太差，且功能扩展难度大，周期长。

为改善上述多方面的问题，特申请启动测温平板新方案。采用RK3568（RK3562）高性能四核处理器，搭配ubuntu20.4操作系统，结合前后端分离的开发思路，实现前端可应用配置及显示，后端完成协议数据驱动及电力网络安全服务、全新数据存储及管理方法等功能。同时，提高未来功能扩展性，提升产品质量、应用开发效率。

## 方案

### 系统方案

主板采用RK3568（3562）工控一体机板，搭配7寸触摸屏幕。硬件接口支持：直流供电、1路网口、2路USB、2路RS485、2路RS232。

### 功能介绍

###### 表格

复制

| 接口    | 说明                                                           |
| :---- | :----------------------------------------------------------- |
| 直流供电  | 12V直流供电，为平板提供电源。需选购合安规及过电力标准EMC的适配器。                         |
| 网口    | 有线网口接网线，实现平板与变电站的局域网连接。需要查询并确认APN等功能                         |
| USB   | 调试开发及实施过程中的应用升级，数据导入导出；后续利用一个USB口，接以太网转换器，实现本地连接微功率无线系统的汇聚节点 |
| RS485 | 连接外部传感器终端，按协议实现数据采集及其它业务                                     |
| RS232 | 连接外部传感器终端，按协议实现数据采集及其它业务                                     |

### 软件框架概设

#### 详情说明

###### 表格

复制

| 项目     | 说明                                                                                                                                                                                                                                                                |
| :----- | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 监测终端   | 监测终端有多种：1、局放、测温、机械特性、声纹振动等；多数是三合一、二合一的设备                                                                                                                                                                                                                          |
| 北向协议   | 因平板重点给南网供货，北向协议主要是IEC104与广电电科院协议；平板角色为从站                                                                                                                                                                                                                          |
| 前端UI   | 前端UI要实现数据驱动层的接口参数配置，及变电站部署信息，采集周期等配置信息。配置类信息，写到系统配置页。显示信息，按纯数据显示、图形显示两种处理。第一阶段若找得到合适的低代码前端开源则按此设计，否则优先实现功能（不考虑低代码平台），此时要选择QT或者C#开发。UI按色块与文本框等显示区域设计，降低UI专用设计要求                                                                                                    |
| 平板集成软件 | 设备端数据驱动开发，打开设备、配置设备信息、匹配协议库（如modbus），一接口方式调用；安全防护主要是系统及的漏洞，权限，防火墙等软件安装及应用；后台服务重点实现与前端的通信mqtt，与北向的协议转发及服务，及异常处理；进程守护：确保系统稳定长时间运行；存储数据管理：含数据库与文件管理，因数据库存储占空间大，需要实现定期数据库整理，存文件，计算容量，满足至少1年历史数据存储与下载查看；同时，提供数据检索效率，提升用户体验；加密库：为提升设备数据安全，可在各部件通信过程中使用加密手段，防止设备遭受外部网络攻击 |
| 平台系统   | 原生ubuntu20.04                                                                                                                                                                                                                                                     |

## 研发任务与计划

本研发工作，为改善旧安卓平板在后续应用需求中耗时长、缺乏有效验证、很多需求无法支持的情况。目前硬件已经选型，可按如下工作执行。同时因并行开发其它项目，留给测温项目的时间有限。特需要压缩项目周期，在30个工作日内。因此研发的思路是优先寻找可用的开源组件及框架，验证通过后，出集成方案。

### 阶段 1

###### 表格

复制

|任务项|说明|
|:--|:--|
|外设测试|拿到硬件后先测试平板外设：串口、usb、网口、含APN等功能，由测试人员罗列测试项目，软件执行。（用于评估平板硬件外设满足应用需求）。并熟悉现有平板软件功能及显示内容。耗时1~2天|
|开源SDK|含北向、南向协议、低代码平台、后端开发、加解密方案等SDK的搜索及验证，用于支持系统软件方案选型。耗时5~7天|

### 阶段 2

###### 表格

复制

|任务项|说明|
|:--|:--|
|系统方案|设计系统方案书（可结合去年初设计的《电力监测终端开发平台软件设计v1》）。明确研发技术指标或目标。数据存储管理；后台服务架构；安全防护设计与指标；加密选型及接口实现；数据驱动层实现方案；测试方案：功能、性能、安全软件测试；耗时2~3天|

### 阶段 3

罗列各子任务计划与执行人，明确开发时间节点，按计划快速执行，并按时间交付。人手资源注意分配。任务开发时间为20个工作日。

### 阶段 4

在第一第二阶段由测试人员，罗列验收指标及编写验收试验大纲。包括硬件EMC测试及其它电力要求的测试。综合验证按2~3个月估计。