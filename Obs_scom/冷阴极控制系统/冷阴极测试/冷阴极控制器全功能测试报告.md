---
time: 2025-03-05
tags:
  - scom
---
## 1. 测试概述

### 1.1 测试目的

本测试旨在验证TQT113_linux_V2.0 X射线设备控制系统的功能完整性、稳定性和安全性，确保系统在实际应用环境中能够稳定可靠地运行。

### 1.2 测试环境

- **硬件平台**：T113处理器开发板
- **操作系统**：Linux系统
- **测试工具**：
  - 网络调试助手
  - 串口调试助手

### 1.3 测试时间

测试时间：2025-03-05

### 1.4 测试人员

- 测试负责人：王一楠
- 软件测试：徐凡

## 2. 测试项目

### 2.1 模块功能测试

#### 2.1.1 通信模块测试

| 测试项目  | 测试内容         | 预期结果        | 实际结果 | 测试结论 |
| ----- | ------------ | ----------- | ---- | ---- |
| 以太网通信 | 建立TCP连接并发送命令 | 成功建立连接并接收响应 | 正常   | 正常   |
| 串口通信  | 通过串口发送命令     | 成功发送命令并接收响应 | 正常   | 正常   |

#### 2.1.2 设备控制模块测试

| 测试项目  | 测试内容       | 预期结果       | 实际结果 | 测试结论 |
| ----- | ---------- | ---------- | ---- | ---- |
| 射线机控制 | 设置电压、电流参数  | 参数设置成功并生效  | 正常   | 正常   |
| 射线机启动 | 启动射线机曝光    | 射线机正常曝光    | 正常   | 正常   |
| 射线机停止 | 停止射线机曝光    | 射线机立即停止曝光  | 正常   | 正常   |
| LCD显示 | 显示系统状态和参数  | 显示清晰完整     | 正常   | 正常   |
| LED指示 | 不同状态下LED指示 | LED指示与状态一致 | 正常   | 正常   |
| 蜂鸣器   | 曝光时蜂鸣器报警   | 蜂鸣器正常报警    | 正常   | 正常   |

#### 2.1.3 输入控制模块测试

| 测试项目   | 测试内容      | 预期结果        | 实际结果 | 测试结论 |
| ------ | --------- | ----------- | ---- | ---- |
| 紧急停止按键 | 按下紧急停止按键  | 系统立即停止曝光    | 正常   | 正常   |
| 延时按键   | 设置延时启动    | 系统按设定时间延时启动 | 正常   | 正常   |
| 选择按键   | 菜单选择和参数调整 | 正确响应按键操作    | 正常   | 正常   |

#### 2.1.4 系统监控模块测试

| 测试项目    | 测试内容    | 预期结果     | 实际结果 | 测试结论 |
| ------- | ------- | -------- | ---- | ---- |
| 电源检测    | 监测电池电量  | 正确显示电量状态 | 正常   | 正常   |
| CPU温度监控 | 监测CPU温度 | 正确显示温度状态 | 正常   | 正常   |
| 进程监控    | 人为终止进程  | 系统自动重启进程 | 正常   | 正常   |

#### 2.1.5 数据处理模块测试

| 测试项目   | 测试内容       | 预期结果       | 实际结果 | 测试结论 |
| ------ | ---------- | ---------- | ---- | ---- |
| JSON解析 | 发送各类JSON命令 | 正确解析并执行命令  | 正常   | 正常   |
| 数据记录   | 记录射线机工作数据  | 数据正确记录并可查询 | 正常   | 正常   |

### 2.2 系统集成测试

| 测试项目 | 测试内容     | 预期结果     | 实际结果 | 测试结论 |
| ---- | -------- | -------- | ---- | ---- |
| 系统启动 | 系统上电启动   | 所有模块正常启动 | 正常   | 正常   |
| 模块协作 | 各模块间协同工作 | 系统功能正常运行 | 正常   | 正常   |
| 异常恢复 | 模拟模块崩溃   | 系统自动恢复   | 正常   | 正常   |

## 3. 详细测试用例

### 3.1 通信模块测试用例

#### TC-COM-001：以太网基本通信测试

**测试目的**：验证系统通过以太网接收和响应命令的能力  
**测试步骤**：
1. 将测试PC通过网线连接到设备
2. 使用网络测试工具向设备发送连接请求
3. 发送JSON格式的查询命令
4. 接收并验证响应数据
**预期结果**：成功建立连接，接收到正确的响应数据

**测试结果**：
1. config指令：
   ![[Pasted image 20250305132024.png]]
2. query指令：
   ![[Pasted image 20250305132035.png]]
3. time指令：
   ![[Pasted image 20250305132044.png]]
4. version指令：
   ![[Pasted image 20250305132052.png]]
5. record指令：
   ![[Pasted image 20250305132101.png]]
6. power指令：
   ![[Pasted image 20250305132109.png]]
7. opt指令：
   ![[Pasted image 20250305132118.png]]
8. stop指令：
   ![[Pasted image 20250305132129.png]]

网口重新连接，功能运行正常
#### TC-COM-002：串口通信测试

**测试目的**：验证系统通过串口接收和响应命令的能力  
**测试步骤**：
1. 将测试PC通过串口连接到设备
2. 使用串口调试工具发送命令
3. 接收并验证响应数据
**预期结果**：成功发送命令并接收到正确响应

**测试结果**：
1. config指令：
   ![[Pasted image 20250305114811.png]]
2. query指令：
   ![[Pasted image 20250305114854.png]]
3. time指令：
   ![[Pasted image 20250305114922.png]]
4. version指令：
   ![[Pasted image 20250305114941.png]]
5. record指令：
   ![[Pasted image 20250305115108.png]]
6. power指令：
   ![[Pasted image 20250305115126.png]]
7. opt指令：
   ![[Pasted image 20250305115158.png]]
8. stop指令：
   ![[Pasted image 20250305115216.png]]
#### TC-COM-003：消息队列压力测试

**测试目的**：验证消息队列在高负载下的稳定性  
**测试步骤**：
1. 模拟高频率消息发送
2. 监控消息传递过程
3. 验证消息是否有丢失或错误

**预期结果**：消息正确传递，无丢失或错误

### 3.2 设备控制模块测试用例

#### TC-CTL-001：射线机参数设置测试

**测试目的**：验证系统正确设置射线机参数的能力  
**测试步骤**：
1. 发送设置电压为180kV的命令
2. 发送设置电流为1500μA的命令
3. 发送设置曝光时间为2000ms的命令
4. 查询当前设置参数

**预期结果**：参数设置成功，查询结果与设置值一致
![[Pasted image 20250305134514.png]]
#### TC-CTL-002：射线机启动测试

**测试目的**：验证系统正确启动射线机的能力  
**测试步骤**：
1. 设置射线机参数
2. 发送启动命令
3. 使用X射线检测仪验证输出

**预期结果**：射线机正常启动并输出X射线
![[Pasted image 20250305134728.png]]
测试采用模拟控制板，能够正确返回指令表示发射X射线正常
#### TC-CTL-003：射线机紧急停止测试

**测试目的**：验证系统紧急停止射线机的能力  
**测试步骤**：
1. 启动射线机
2. 发送紧急停止命令
3. 验证射线机停止状态

**预期结果**：射线机立即停止工作
![[Pasted image 20250305134957.png]]
射线机停止曝光，蜂鸣器以及led停止曝光提示，lcd显示急停信息；
#### TC-CTL-004：LCD显示测试

**测试目的**：验证LCD正确显示系统信息的能力  
**测试步骤**：
1. 启动系统
2. 设置不同参数
3. 验证显示内容

**预期结果**：LCD显示内容清晰完整，与系统状态一致
![[Pasted image 20250305135503.png]]
![[Pasted image 20250305135528.png]]
![[Pasted image 20250305135646.png]]
配置参数对应显示数据显示正确
#### TC-CTL-005：LED指示测试

**测试目的**：验证LED正确指示系统状态的能力  
**测试步骤**：
1. 启动系统
2. 切换系统到不同状态
3. 观察LED指示灯状态

**预期结果**：LED指示与系统状态一致
电量过低led闪烁
![[Pasted image 20250305140015.png]]
射线机曝光led闪烁
![[Pasted image 20250305140033.png]]
#### TC-CTL-006：蜂鸣器测试

**测试目的**：验证蜂鸣器正确发出警告的能力  
**测试步骤**：
1. 启动射线机
2. 验证蜂鸣器是否发出警告声
3. 停止射线机
4. 验证蜂鸣器是否停止

**预期结果**：蜂鸣器在射线机工作时发出警告声，停止时停止
![[Pasted image 20250305140257.png]]
经过测试，蜂鸣器在射线机工作时发出警告声，并且在停止时停止；
### 3.3 输入控制模块测试用例

#### TC-INP-001：紧急停止按键测试

**测试目的**：验证紧急停止按键的功能  
**测试步骤**：
1. 启动射线机
2. 按下紧急停止按键
3. 验证系统响应

**预期结果**：系统立即停止射线机工作
经过测试，启动射线机过后，按下紧急停止按键，射线机停止曝光，蜂鸣器以及led停止曝光提示，lcd显示急停信息；
#### TC-INP-002：延时按键测试

**测试目的**：验证延时启动功能  
**测试步骤**：
1. 按下延时启动按键
2. 验证系统是否按规定时间延时启动

**预期结果**：系统按规定时间延时启动射线机
经过测试，按下延时启动按键，射线机在规定时间延时之后启动了射线机；
#### TC-INP-003：选择按键测试

**测试目的**：验证选择按键的功能  
**测试步骤**：
1. 使用选择按键切换射线机工作电压
2. 验证系统响应

**预期结果**：系统正确响应按键操作，菜单选择正确
按下选择按键，屏幕显示
![[Pasted image 20250305141149.png]]
曝光电压200kV选择高压参数成功
再次按下选择按键屏幕显示
![[Pasted image 20250305141335.png]]
曝光电压100kV选择低压参数成功；
### 3.4 系统监控模块测试用例

#### TC-MON-001：电源检测测试

**测试目的**：验证系统正确监测电池电量的能力  
**测试步骤**：
1. 使用可调电源模拟不同电量状态
2. 观察系统电量显示
3. 验证低电量警告功能

**预期结果**：系统正确显示电量状态，低电量时发出警告
经过测试，电量过低，电源指示灯闪烁成功，电量超过低电提醒电量，电源指示灯熄灭，电源检查正常；
![[Pasted image 20250305140015.png]]
#### TC-MON-002：CPU温度监控测试

**测试目的**：验证系统正确监测CPU温度的能力  
**测试步骤**：
1. 运行高负载程序使CPU温度升高
2. 观察系统温度显示
3. 验证高温保护功能

**预期结果**：系统正确显示温度状态，高温时执行保护措施
![[Pasted image 20250305143018.png]]
#### TC-MON-003：进程监控测试

**测试目的**：验证系统自动恢复异常进程的能力  
**测试步骤**：
1. 人为终止关键进程
2. 观察系统响应
3. 验证进程是否自动重启

**预期结果**：系统自动重启异常进程
关闭check power进程
![[Pasted image 20250305143305.png]]
确认check power进程已被关闭
![[Pasted image 20250305143349.png]]
经过4秒过后check power进程重新自启动
![[Pasted image 20250305143445.png]]

### 3.5 数据处理模块测试用例

#### TC-DAT-001：JSON解析测试

**测试目的**：验证系统正确解析JSON命令的能力  
**测试步骤**：
1. 发送各类JSON格式命令
2. 验证系统响应
3. 测试错误格式的JSON命令

**预期结果**：系统正确解析并执行命令，对错误格式命令给出错误提示
发送正确JSON命令：
![[Pasted image 20250305134257.png]]
发送错误JSON命令：
![[Pasted image 20250305134314.png]]

#### TC-DAT-002：数据记录测试

**测试目的**：验证系统正确记录射线机工作数据的能力  
**测试步骤**：
1. 启动射线机多次曝光
2. 查询记录数据
3. 验证记录的完整性和准确性

**预期结果**：数据正确记录并可查询
1.cpu的温度数据记录
![[Pasted image 20250305151035.png]]
查询数据库cpu数据
![[Pasted image 20250305151118.png]]

2.check power的数据记录
![[Pasted image 20250305151601.png]]
查询数据库power数据
![[Pasted image 20250305151613.png]]

3.时间的数据记录
![[Pasted image 20250305151918.png]]
查询数据库时间
![[Pasted image 20250305152126.png]]

4.配置射线机参数记录
![[Pasted image 20250305152240.png]]
查询射线机配置参数
![[Pasted image 20250305152251.png]]

5.使用query获取射线机配置参数
![[Pasted image 20250305152427.png]]

6，记录曝光参数
![[Pasted image 20250305152612.png]]

7.上电恢复射线机配置参数
![[Pasted image 20250305152713.png]]
![[Pasted image 20250305152726.png]]
重新启动系统屏幕显示射线机参数正确
![[Pasted image 20250305152837.png]]
## 4. 性能测试详细方案

### 4.1 CPU占用率测试

**测试目的**：评估系统在正常运行时的CPU占用情况  
**测试方法**：
1. 使用系统监控工具记录CPU使用率
2. 在不同工作负载下测试（空闲、正常操作、高负载）
3. 记录最大、最小和平均CPU使用率

**预期结果**：CPU占用率平均值<30%，峰值<60%
![[Pasted image 20250305143655.png]]
### 4.2 内存占用测试

**测试目的**：评估系统在正常运行时的内存占用情况  
**测试方法**：
1. 使用系统监控工具记录内存使用情况
2. 在不同工作负载下测试
3. 记录最大、最小和平均内存占用

**预期结果**：内存占用<50MB
![[Pasted image 20250305143737.png]]
### 4.3 响应时间测试

**测试目的**：评估系统响应命令的速度  
**测试方法**：
1. 发送命令并记录从发送到接收响应的时间
2. 在不同网络条件下测试
3. 记录最大、最小和平均响应时间

**预期结果**：响应时间<100ms
![[Pasted image 20250305143813.png]]
配置指令响应时间为428ms
![[Pasted image 20250305143848.png]]
其他指令响应时间69ms
## 5. 稳定性测试详细方案

### 5.1 长时间运行测试

**测试目的**：验证系统长时间运行的稳定性  
**测试方法**：
1. 系统连续运行72小时
2. 定期执行各项功能
3. 监控系统状态和资源使用情况

**预期结果**：系统稳定运行，无崩溃或性能下降

### 5.2 高频命令测试

**测试目的**：验证系统在高频命令下的稳定性  
**测试方法**：
1. 使用自动化工具高频发送命令
2. 验证系统响应的正确性
3. 监控系统资源使用情况

**预期结果**：系统正常响应，无丢失或错误
![[Pasted image 20250305153435.png]]

## 6. 测试报告
测试通过
