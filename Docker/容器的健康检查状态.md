---
time: 2025-03-20
tags:
  - docker
---

### 容器的健康检查状态 `(health)` 通常有以下几种可能的状态：

1. **`starting`**：
   - 表示容器正在启动过程中，健康检查尚未完成。这是初始状态，通常在容器刚刚启动时出现。
   - 例如，GitLab 容器可能需要一些时间来初始化服务，因此健康检查会显示为 `starting`。

2. **`healthy`**：
   - 表示容器已经成功启动，并且健康检查通过。这是正常运行状态，表示容器内的服务已经准备好并可以正常使用。
   - 当你看到 `(health: healthy)` 时，说明容器和其中的服务已经正常启动并且处于健康状态。

3. **`unhealthy`**：
   - 表示容器启动失败或者服务运行异常，健康检查未通过。这通常意味着容器内部的服务无法正常运行，或者某些关键组件出现了问题。
   - 如果看到 `(health: unhealthy)`，需要进一步排查问题，例如查看日志、检查配置等。

### **如何确认容器是否完全正常**
即使健康检查状态显示为 `healthy`，你还可以通过以下方法进一步确认容器是否完全正常运行：

1. **访问 GitLab 服务**：
   - 打开浏览器，访问 GitLab 的 URL（通常是 `http://<宿主机IP>` 或 `https://<宿主机IP>`）。
   - 如果页面正常加载并且可以登录，说明 GitLab 服务已经完全启动。

2. **查看日志**：
   - 运行以下命令查看容器的日志：
     ```bash
     docker logs 87dc16b21a4e
     ```
   - 查看是否有错误信息或警告，确认服务启动过程中没有问题。

3. **检查服务状态**：
   - 如果可以进入容器内部，运行以下命令检查 GitLab 服务的状态：
     ```bash
     docker exec -it 87dc16b21a4e /bin/bash
     gitlab-ctl status
     ```
   - 这将显示 GitLab 各个组件的状态，确认所有服务都已正常启动。

### **总结**
- **`(health: healthy)`** 表示容器已经正常启动并且服务处于健康状态。
- 如果健康检查状态变为 `healthy`，通常意味着容器已经准备好并且可以正常使用。
